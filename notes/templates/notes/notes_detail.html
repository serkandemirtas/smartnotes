{% extends "base.html" %}

{% block content %}
<div class="container my-5">
    <div class="card shadow-lg p-4 mx-auto" style="max-width: 700px; border-radius: 12px;">
        <h2 class="text-primary mb-2">
            {{ note.title }}
            {% if note.is_public %}
                <span class="badge bg-info text-dark">Public</span>
            {% endif %}
        </h2>

        <p class="text-muted mb-3">
            Created: {{ note.created|date:"d M Y H:i" }}<br>
            Updated: {{ note.update|date:"d M Y H:i" }}
        </p>

        <p class="mb-4">{{ note.text }}</p>

        <p><strong>{{ note.likes }} Likes</strong></p>

        <form method="post" class="d-inline me-2" action="{% url 'notes.add_like' pk=note.id %}">
            {% csrf_token %}
            {{ form.as_p }}
            <button class="btn btn-primary my-2" type="submit">Upvote</button>
        </form>

        <form method="post" class="d-inline me-2" action="{% url 'notes.change_visibility' pk=note.id %}">
            {% csrf_token %}
            {{ form.as_p }}
            <button class="btn btn-secondary my-2" type="submit">
                {% if note.is_public %}
                    Make it private
                {% else %}
                    Make it public
                {% endif %}
            </button>
        </form>

        <div class="mt-4">
            <a href="{% url 'note.list' %}" class="btn btn-secondary me-2">Back</a>
            <a href="{% url 'notes.update' pk=note.id %}" class="btn btn-secondary me-2">Edit</a>
            <a href="{% url 'notes.delete' pk=note.id %}" class="btn btn-danger">Delete</a>
        </div>
    </div>
</div>
{% endblock %}
